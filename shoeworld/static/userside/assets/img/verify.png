
<!-- saved from url=(0033)http://127.0.0.1:8000/verify_otp/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
    
    .register-card {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        
    }
    .login_wrap {
        max-width: 500px;
        width: 100%;
        padding: 40px;
        background: white;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .form-group.center {
        display: flex;
        justify-content: center;
    }
    .messages {
        margin-bottom: 20px;
    }
    .messages .message {
        padding: 10px;
        border-radius: 5px;
        margin-bottom: 10px;
    }
    .messages .success {
        background-color: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
    }
    .messages .error {
        background-color: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
    }
</style>
</head>

<body style="background-image: url(&#39;https://media.gettyimages.com/id/492339961/photo/different-shoes-displayed-in-a-shoe-shop.jpg?s=612x612&amp;w=0&amp;k=20&amp;c=BZxyhurM1CclFGY7YCQ6X0ocHsXwpbjtwe1VNiSW1HU=&#39;); background-size: cover; background-position: center;">
    <main class="main">
    <section class="register-card">
        <div class="login_wrap widget-taber-content">
            <div class="padding_eight_all bg-white">
                <div class="heading_s1">
                    <h3 style="font-size: 2rem; font-weight: 700; color: #333; text-align: center; padding-bottom: 15px; border-bottom: 2px solid #f0ad4e; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 30px; font-family: &#39;Poppins&#39;, sans-serif;">Verify OTP</h3>
                </div>
                
                
                    <div class="messages">
                        
                            <div class="message success">
                                OTP has been sent to your email. Please verify to complete registration.
                            </div>
                        
                    </div>
                
                
                <form method="post" action="http://127.0.0.1:8000/verify_otp/">
                    <input type="hidden" name="csrfmiddlewaretoken" value="CgvehOJR1WtNO6qRtaFMQsfBnKjom4izcPFxCaRc5dJXpOnOObVzRmuyUnPm0WaB">
                    <div class="form-group center">
                        <label for="otp">OTP:</label>
                        <input type="text" id="otp" name="otp" required="">
                        
                    </div>
                    <div class="form-group center">

                    <p style="font-size:30px;" id="timer">1:34</p>
                    </div>
                    <div class="form-group center">
                        <button type="submit" id="verify-button" class="btn btn-primary btn-block">Verify OTP</button>
                    </div>
                </form>
               
              
                <div class="form-group center">
                    <a href="http://127.0.0.1:8000/resend_otp/"><button id="resend-btn" class="btn btn-secondary btn-block" onclick="resendOTP();" disabled="">Resend OTP</button></a>
                </div>

            </div>
        </div>
    </section>
</main>

<script>

        var interval;
        var totalTime = 120;  // Timer duration in seconds
        var otpGenerationTime = "2024-10-07T04:45:31.615959+00:00";  // OTP generation time from session
    
        function startTimer() {
            var timerDisplay = document.getElementById('timer');
            var resendButton = document.getElementById('resend-btn');
            var verifyButton = document.getElementById('verify-button');
    
            resendButton.disabled = true;
            verifyButton.disabled = false;
    
            // Calculate remaining time based on current time and OTP generation time
            var currentTime = new Date().getTime();
            var otpTime = new Date(otpGenerationTime).getTime();
            var elapsedTime = Math.floor((currentTime - otpTime) / 1000);  // Elapsed time in seconds
            var remainingTime = totalTime - elapsedTime;
    
            // If remaining time is less than or equal to zero, reset timer
            if (remainingTime <= 0) {
                remainingTime = 0;
                resendButton.disabled = false;
                verifyButton.disabled = true;
            }
    
            function updateDisplay(time) {
                var minutes = Math.floor(time / 60);
                var seconds = time % 60;
    
                if (seconds < 10) {
                    seconds = '0' + seconds;
                }
    
                timerDisplay.textContent = minutes + ':' + seconds;
            }
    
            updateDisplay(remainingTime);
    
            interval = setInterval(function () {
                if (remainingTime <= 0) {
                    clearInterval(interval);
                    resendButton.disabled = false;
                    verifyButton.disabled = true;
                    timerDisplay.textContent = '';  // Clear the timer display
                } else {
                    remainingTime--;
                    updateDisplay(remainingTime);
                }
            }, 1000);
        }
    
        function resendOTP() {
            // Clear previous interval and restart the timer
            clearInterval(interval);
            startTimer();
        }
    
        document.addEventListener('DOMContentLoaded', function () {
            if (otpGenerationTime) {
                startTimer();  // Start the timer only if OTP generation time is present
            } else {
                document.getElementById('resend-btn').disabled = false;
                document.getElementById('verify-button').disabled = true;
            }
        });
    
        document.getElementById('resend-btn').addEventListener('click', function () {
            resendOTP();
        });

    
</script>




 
</body></html>